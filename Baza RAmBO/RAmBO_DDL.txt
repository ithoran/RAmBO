

CREATE TABLE KORISNIK (
    ID int PRIMARY KEY AUTO_INCREMENT,
    FADMINISTRATOR boolean DEFAULT '0',
    FCLAN boolean,
    USERNAME varchar(20) NOT NULL,
    `PASSWORD` varchar(30) NOT NULL,
    EMAIL varchar(30) NOT NULL,
    DRZAVA varchar(30)
);

ALTER TABLE KORISNIK AUTO_INCREMENT=100001;

CREATE TABLE KONTAKT (
    KORISNIK_ID int,
    KONTAKT varchar(30),
    FOREIGN KEY (KORISNIK_ID)
    REFERENCES KORISNIK(ID)
    ON DELETE CASCADE,
    PRIMARY KEY (KORISNIK_ID, KONTAKT)
);

CREATE TABLE `objava` (
 `ID` int(11) NOT NULL AUTO_INCREMENT,
 `NAZIV` varchar(50) NOT NULL,
 `TIP` varchar(30) NOT NULL,
 `DATUM` date DEFAULT NULL,
 `DATUM_OBJAVE` datetime DEFAULT NULL,
 `MESTO` varchar(30) NOT NULL,
 `FIZGUBLJENO` tinyint(1) NOT NULL DEFAULT '0',
 `FNADJENO` tinyint(1) NOT NULL DEFAULT '0',
 `NAGRADA` varchar(30) DEFAULT NULL,
 `STANJE` enum('uspesno','utoku','otkazano') DEFAULT NULL,
 `KORISNIK_ID` int(11) NOT NULL,
 PRIMARY KEY (`ID`),
    FOREIGN KEY (KORISNIK_ID)
    REFERENCES KORISNIK(ID)
) ENGINE=MyISAM AUTO_INCREMENT=5020 DEFAULT CHARSET=latin1;


ALTER TABLE OBJAVA AUTO_INCREMENT=5000;

CREATE TABLE prijava (
ID int PRIMARY KEY AUTO_INCREMENT,
IDP int,
IDR int,
IDO int,
TEKST text,
FOREIGN KEY (IDP) REFERENCES korisnik(ID),
FOREIGN KEY (IDR) REFERENCES korisnik(ID),
FOREIGN KEY (IDO) REFERENCES objava(ID)
);

ALTER TABLE prijava AUTO_INCREMENT = 100;
