

CREATE TABLE KORISNIK (
    ID int PRIMARY KEY AUTO_INCREMENT,
    FADMINISTRATOR boolean DEFAULT '0',
    FCLAN boolean,
    USERNAME varchar(20) NOT NULL,
    `PASSWORD` varchar(30) NOT NULL,
    EMAIL varchar(30) NOT NULL,
    DRZAVA varchar(30)
)ENGINE=InnoDB;

ALTER TABLE KORISNIK AUTO_INCREMENT=100001;


CREATE TABLE `objava` (
 `ID` int(11) NOT NULL AUTO_INCREMENT,
 `NAZIV` varchar(50) NOT NULL,
 `TIP` varchar(30) NOT NULL,
 `DATUM` date DEFAULT NULL,
 `DATUM_OBJAVE` datetime DEFAULT NULL,
 `MESTO` varchar(30) NOT NULL,
 `FIZGUBLJENO` tinyint(1) NOT NULL DEFAULT '0',
 `FNADJENO` tinyint(1) NOT NULL DEFAULT '0',
 `OPIS` text DEFAULT NULL,
 `NAGRADA` varchar(30) DEFAULT NULL,
 `STANJE` enum('Uspesno','U toku','Otkazano') DEFAULT NULL,
 `SLIKA` varchar(100) DEFAULT NULL,
 `LAT` double DEFAULT NULL,
 `LNG` double DEFAULT NULL,
 `KORISNIK_ID` int(11) NOT NULL,
  PRIMARY KEY (`ID`),
  FOREIGN KEY (KORISNIK_ID) REFERENCES KORISNIK(ID) ON DELETE CASCADE
) ENGINE=InnoDB;


ALTER TABLE OBJAVA AUTO_INCREMENT=5000;

CREATE TABLE prijava (
ID int PRIMARY KEY AUTO_INCREMENT,
IDP int,
IDR int,
IDO int,
TEKST text,
FOREIGN KEY (IDP) REFERENCES korisnik(ID) ON DELETE CASCADE,
FOREIGN KEY (IDR) REFERENCES korisnik(ID) ON DELETE CASCADE,
FOREIGN KEY (IDO) REFERENCES objava(ID) ON DELETE CASCADE
)ENGINE=InnoDB;

ALTER TABLE prijava AUTO_INCREMENT = 100;


CREATE TABLE poruka(
ID int PRIMARY KEY AUTO_INCREMENT,
CONTENT text,
OBJAVA_ID int,
SENDER_ID int,
RECEIVER_ID int,
VREME datetime,
`READ` int,
FOREIGN KEY (SENDER_ID) REFERENCES korisnik(ID),
FOREIGN KEY (RECEIVER_ID) REFERENCES korisnik(ID),
FOREIGN KEY (OBJAVA_ID) REFERENCES objava(ID)
)ENGINE=InnoDB;

ALTER TABLE poruka AUTO_INCREMENT = 1;















